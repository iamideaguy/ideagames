<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E4PJR6D8CJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E4PJR6D8CJ');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPS: Ultimate Chaos</title>
    <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            background-color: #fbf9f1;
            color: #111;
            font-family: 'Space Mono', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* --- HEADER --- */
        header { padding: 30px; text-align: center; }
        h1 { font-family: 'Archivo Black', sans-serif; font-size: 2.5rem; text-transform: uppercase; line-height: 1; margin: 0; }
        .subtitle { color: #666; margin-top: 10px; font-weight: bold; }

        /* --- BATTLE ARENA --- */
        #arena {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 90%;
            max-width: 800px;
            margin: 20px 0;
            padding: 30px;
            background: #fff;
            border: 4px solid #111;
            box-shadow: 12px 12px 0 #111;
            min-height: 250px; /* Made slightly taller for names */
            position: relative;
        }

        .fighter { 
            text-align: center; 
            width: 30%; 
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        /* NEW: Name Tags above emojis */
        .name-tag {
            font-family: 'Archivo Black', sans-serif;
            font-size: 1.2rem;
            color: #111;
            text-transform: uppercase;
            margin-bottom: 10px;
            min-height: 30px; /* Keeps layout stable */
        }

        .emoji-display { font-size: 5rem; display: block; margin-bottom: 10px; transition: transform 0.2s; }
        
        .fighter-label { 
            font-weight: bold; 
            text-transform: uppercase; 
            font-size: 1rem; 
            background: black; 
            color: white; 
            display: inline-block; 
            padding: 2px 8px; 
            margin-top: 5px;
        }

        /* VS / RESULT AREA */
        #result-area { width: 40%; text-align: center; }
        #outcome-text { font-family: 'Archivo Black', sans-serif; font-size: 1.8rem; color: #111; margin-bottom: 10px; line-height: 1; }
        #reason-text { font-size: 1rem; color: #555; min-height: 40px; line-height: 1.4; font-weight: bold; text-transform: uppercase; }

        /* --- THE GRID --- */
        #grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(85px, 1fr));
            gap: 15px;
            width: 95%;
            max-width: 900px;
            margin-bottom: 50px;
            padding: 20px;
        }

        .weapon-btn {
            background: #fff;
            border: 3px solid #111;
            border-radius: 12px;
            padding: 10px 5px;
            cursor: pointer;
            transition: all 0.1s;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 4px 4px 0 #ccc;
        }
        .weapon-btn:hover {
            transform: translate(-3px, -3px);
            box-shadow: 7px 7px 0 #111;
            background: #ffeb3b;
        }
        .weapon-btn:active {
            transform: translate(0px, 0px);
            box-shadow: 2px 2px 0 #111;
        }
        
        .weapon-icon { font-size: 2.2rem; margin-bottom: 5px; }
        .weapon-name { font-size: 0.7rem; font-weight: bold; margin-top: 5px; text-transform: uppercase; text-align: center; line-height: 1.1; }

        /* ANIMATIONS */
        .shake { animation: shake 0.5s infinite; }
        @keyframes shake {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(15deg); }
            50% { transform: rotate(0deg); }
            75% { transform: rotate(-15deg); }
            100% { transform: rotate(0deg); }
        }
        
        .win-anim { animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .lose-anim { filter: grayscale(100%); opacity: 0.3; transform: scale(0.8); }
        @keyframes pop { 
            0% { transform: scale(0.5); opacity: 0; } 
            50% { transform: scale(1.4); } 
            100% { transform: scale(1); opacity: 1; } 
        }

    </style>
</head>
<body>

    <header>
        <h1>RPS Chaos</h1>
        <div class="subtitle">Rock, Paper, Scissors... and 22 other bad ideas.</div>
    </header>

    <div id="arena">
        <div class="fighter">
            <div id="p1-name" class="name-tag">???</div>
            <span id="p1-emoji" class="emoji-display">‚ùî</span>
            <div class="fighter-label">YOU</div>
        </div>

        <div id="result-area">
            <div id="outcome-text">CHOOSE</div>
            <div id="reason-text">Select an item below to fight.</div>
        </div>

        <div class="fighter">
            <div id="cpu-name" class="name-tag">???</div>
            <span id="cpu-emoji" class="emoji-display">‚ùî</span>
            <div class="fighter-label">CPU</div>
        </div>
    </div>

    <div id="grid"></div>

    <script src="outcomes.js"></script>

    <script>
        const items = {
            "rock": "ü™®", "paper": "üìÑ", "scissors": "‚úÇÔ∏è", "water": "üíß", "fire": "üî•",
            "human": "üë®", "nuke": "üí£", "cockroach": "ü™≥", "lawyer": "‚öñÔ∏è", "god": "‚ö°",
            "atheist": "‚öõÔ∏è", "bitcoin": "‚Çø", "alien": "üëΩ", "sponge": "üßΩ", "dragon": "üêâ",
            "gun": "üî´", "wall": "üß±", "computer": "üíª", "money": "üí∏", "camera": "üì∏",
            "sun": "‚òÄÔ∏è", "vampire": "üßõ", "internet": "üåê", "time": "‚è≥", "cow": "üêÑ"
        };
        
        const keys = Object.keys(items);
        const grid = document.getElementById('grid');

        // --- BUILD GRID ---
        keys.forEach(k => {
            const btn = document.createElement('div');
            btn.className = 'weapon-btn';
            btn.innerHTML = `<div class="weapon-icon">${items[k]}</div><div class="weapon-name">${k}</div>`;
            btn.onclick = () => startRound(k);
            grid.appendChild(btn);
        });

        // --- GAME LOGIC ---
        function startRound(playerChoice) {
            const p1Emoji = document.getElementById('p1-emoji');
            const cpuEmoji = document.getElementById('cpu-emoji');
            const p1Name = document.getElementById('p1-name');
            const cpuName = document.getElementById('cpu-name');
            const display = document.getElementById('outcome-text');
            const reason = document.getElementById('reason-text');

            // 1. Reset Visuals
            p1Name.innerText = playerChoice.toUpperCase();
            cpuName.innerText = "???";
            p1Emoji.innerText = "ü§ú"; 
            cpuEmoji.innerText = "ü§õ";
            p1Emoji.className = 'emoji-display shake';
            cpuEmoji.className = 'emoji-display shake';
            display.innerText = "FIGHTING...";
            reason.innerText = "";

            // 2. Wait 800ms
            setTimeout(() => {
                finishRound(playerChoice, p1Emoji, cpuEmoji, p1Name, cpuName, display, reason);
            }, 800);
        }

        function finishRound(playerChoice, p1Emoji, cpuEmoji, p1Name, cpuName, display, reason) {
            // 1. CPU Picks
            const cpuChoice = keys[Math.floor(Math.random() * keys.length)];

            // 2. Reveal CPU
            p1Emoji.className = 'emoji-display';
            cpuEmoji.className = 'emoji-display';
            p1Emoji.innerText = items[playerChoice];
            cpuEmoji.innerText = items[cpuChoice];
            p1Name.innerText = playerChoice.toUpperCase();
            cpuName.innerText = cpuChoice.toUpperCase();

            // 3. CHECK LOGIC
            if (playerChoice === cpuChoice) {
                display.innerText = "DRAW";
                display.style.color = "#111";
                reason.innerText = `TWO ${playerChoice.toUpperCase()}S DO NOTHING`;
                return;
            }

            // Lookup Interaction (Force lowercase to prevent stalling)
            let p1 = playerChoice.toLowerCase();
            let p2 = cpuChoice.toLowerCase();
            let key1 = `${p1}_${p2}`;
            let key2 = `${p2}_${p1}`;
            
            // Check outcomes.js
            let data = outcomes[key1] || outcomes[key2];

            if (!data) {
                display.innerText = "DRAW";
                reason.innerText = "LOGIC MISSING (UPDATE OUTCOMES.JS)";
                return;
            }

            // 4. CONSTRUCT SENTENCE
            let [winner, verb] = data.split('|');
            let loser = (winner === p1) ? p2 : p1;
            
            // Sentence Construction: "ROCK" + "CRUSHES" + "SCISSORS"
            let fullSentence = `${winner.toUpperCase()} ${verb.toUpperCase()} ${loser.toUpperCase()}`;

            if (winner === p1) {
                display.innerText = "YOU WIN";
                display.style.color = "#00aa00";
                p1Emoji.classList.add('win-anim');
                cpuEmoji.classList.add('lose-anim');
            } else {
                display.innerText = "YOU LOSE";
                display.style.color = "#ff0000";
                cpuEmoji.classList.add('win-anim');
                p1Emoji.classList.add('lose-anim');
            }
            reason.innerText = fullSentence;
        }
    </script>
</body>
</html>